<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç•¢æ¥­å¿«æ¨‚å°éŠæˆ²</title>
  <style>
    body {
      font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
      background-color: #fff7e6;
      text-align: center;
      padding: 30px;
    }
    #story {
      margin: 30px 0;
      font-size: 1.5em;
      min-height: 180px;
      color: #333;
    }
    #alphabet {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 800px;
      margin: 0 auto;
    }
    .multi-choice {
      min-width: 80px;
      height: 60px;
      margin: 5px;
      font-size: 0.9em;
      background-color: #fff;
      border: 2px solid #ffd666;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 8px;
    }
    .multi-choice:hover {
      background-color: #ffe58f;
      border-color: #ffa940;
    }
    .multi-choice.selected {
      background-color: #ff7875;
      border-color: #ff4d4f;
      color: white;
    }
    button {
      background-color: #91d5ff;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      margin: 20px 10px;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #69c0ff;
    }
    #musicControl {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 100;
    }
  </style>
</head>

<body>
  <!-- éŸ³æ¨‚æ’­æ”¾å™¨ï¼ˆæš«ç„¡éŸ³æª”ï¼‰ -->
  <audio id="bgm" src="" loop autoplay muted></audio>
  <button id="musicControl" onclick="toggleMusic()">ğŸ”ˆ éŸ³æ¨‚</button>

  <h1>ğŸ“ é¦¬ä¾†è¥¿äºå›æ†¶å°éŠæˆ² âœ§</h1>

  <div id="story">
    ç¬¬ <span id="questionNumber">1</span> é¡Œï¼šè«‹ä¾å›æ†¶é¸æ“‡æ­£ç¢ºçš„ç­”æ¡ˆ
  </div>

  <div id="alphabet"></div>

  <div>
    <button onclick="submitMulti()">æäº¤ç­”æ¡ˆ</button>
    <button onclick="resetMulti()">é‡æ–°é¸æ“‡</button>
  </div>

  <script>
    const questions = [
      {
        type: 'normal',
        options: ["A. é£›æ©Ÿ", "B. Uber", "C. è…³è¸è»Š", "D. ç«è»Š"],
        correct: ["B"],
        question: "åœ¨é¦¬ä¾†è¥¿äºï¼Œæˆ‘å€‘æœ€å¸¸æ­ä¹˜çš„äº¤é€šå·¥å…·æ˜¯ï¼Ÿ"
      },
      {
        type: 'normal',
        options: [
          "A. ã€Šä¸­è«–è§€ç‡ƒå¯ç‡ƒå“ç¬¬åï¼ˆåå…­åˆï¼‰ã€‹",
          "B. é¦¬ä¾†è¥¿äºçš„å‚³çµ±æœé£¾è¨­è¨ˆ",
          "C. äºæ´²ç¾é£Ÿæ–‡åŒ–å°è«–",
          "D. é¦¬ä¾†èªæ—¥å¸¸æœƒè©±å…¥é–€",
          "E. åœ‹éš›ä¸­æ–‡æ•™å¸«å¯¦å‹™",
          "F. æ±å—äºç¾ä»£è—è¡“å°è«–",
          "G. å®—æ•™èˆ‡å¤šå…ƒç¤¾æœƒ",
          "H. æµ·å¤–è¯äººç¶“æ¿Ÿå²",
          "I. æ–°é¦¬æ–‡å­¸èˆ‡ç¾ä»£æ€§",
          "J. ä¸–ç•Œè¯æ–‡åª’é«”æ¦‚è«–",
          "K. è¯äººå‚³çµ±ç¯€æ…¶",
          "L. å©šå§»èˆ‡å®—æ•™æ–‡åŒ–",
          "M. å—æ´‹æ­·å²è¸æŸ¥èˆ‡å¯«ä½œ",
          "N. é¦¬è¯æˆ²åŠ‡å‰µä½œå·¥ä½œåŠ",
          "O. æ±å—äºé›»å½±è³æ",
          "P. æµ·å¤–ä¸­æ–‡å ±åˆŠåˆ†æ",
          "Q. é¦¬ä¾†èªæ–‡æ³•çµæ§‹",
          "R. å®¢å®¶èªèˆ‡ç¤¾ç¾¤",
          "S. å¤šèªç¤¾æœƒçš„èªè¨€ä½¿ç”¨",
          "T. æ–°æ‘æ–‡åŒ–ç ”ç©¶",
          "U. è¯èªèª²å ‚å¯¦ç¿’ç¶“é©—",
          "V. é¦¬ä¾†è¥¿äºå°èªªé–±è®€",
          "W. å°å°¼èªåˆç´šæœƒè©±",
          "X. å—æ´‹è…³æœ¬ç ”ç©¶å°è«–",
          "Y. ã€Šé©¬åæ–‡å­¦ã€é©¬æ¥æ–‡å­¦ä»¥åŠåé©¬æ¯”è¾ƒçš„ç ”ç©¶æ¦‚å†µã€‹",
          "Z. ç§‘æŠ€èˆ‡ç¤¾æœƒ"
        ],
        correct: ["A", "Y"],
        question: "æˆ‘å€‘ä¸Šéå“ªäº›èª²ï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰"
      },
      {
        type: 'normal',
        options: [
          "A. æ¤°æ—å°å¾‘",
          "B. å¤å··å¼„",
          "C. å®œåº·çœè¶…å¸‚",
          "D. æª³æ¦”åœ’",
          "E. é›²éœ§å±±ä¸˜",
          "F. æ¹–ç•”å…¬åœ’",
          "G. å³¶å¶¼æ²™ç˜",
          "H. å¸‚ä¸­å¿ƒå»£å ´",
          "I. èŠ±åœ’æ­¥é“",
          "J. æºªæµå²¸é‚Š",
          "K. æ–‡åŒ–å±•è¦½é¤¨",
          "L. å‚³çµ±æ‰‹ä½œåŠ",
          "M. å¤é®è€è¡—",
          "N. è è˜¿ç”°",
          "O. éª°å­å··",
          "P. é›å ´è¡—",
          "Q. ç‡ˆç± å··",
          "R. éœ¹é‚æ´",
          "S. åˆå¤œå°é…’é¤¨",
          "T. ç«¹æ—æ­¥é“",
          "U. ç’°å³¶æ­¥é“",
          "V. å±±é ‚ç­æœ›å°",
          "W. éºè·¡è€ƒå¤å€",
          "X. å¤å ¡æ¢éšª",
          "Y. é‡‘å¯¶å¤å»Ÿ",
          "Z. ç†±å¸¶é›¨æ—"
        ],
        correct: ["C", "R", "Y"],
        question: "æˆ‘å€‘å»éå“ªäº›åœ°æ–¹å‘¢ï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰"
      },
      {
        type: 'normal',
        options: ["æ¨‚", "å–œ", "æ„›", "ç¬‘"],
        correct: ["æ¨‚"],
        question: "é€™è¶Ÿé¦¬ä¾†è¥¿äºçš„å¿ƒæƒ…ï¼Œç”¨ä¸€å€‹å­—å½¢å®¹ï¼Ÿ"
      }
    ];

    const hintMessages = [
      "ä»”ç´°æƒ³æƒ³ï¼Œé‚£æ®µå›æ†¶æ˜¯æ€æ¨£çš„å‘¢ï¼Ÿ",
      "å¯èƒ½å†å›å‘³ä¸€ä¸‹æˆ‘å€‘çš„é¦¬ä¾†ä¹‹æ—…å–”ï½",
      "ç­”æ¡ˆå°±åœ¨ä½ å¿ƒä¸­æœ€æ·±åˆ»çš„é‚£å€‹ç‰‡æ®µï¼",
      "å›æƒ³ä¸€ä¸‹è‚‰éª¨èŒ¶ã€éœ¹é‚æ´ã€æ­Uberâ€¦â€¦",
      "ä¸€å®šå¯ä»¥çš„ï¼Œå†è©¦è©¦ï¼"
    ];

    let currentQuestion = 0;
    let selectedLetters = [];
    let finalResult = []; // æœƒä¾åºå­˜ ["B","YA","CRY","æ¨‚"]

    function generateButtons() {
      const alphabetContainer = document.getElementById('alphabet');
      alphabetContainer.innerHTML = '';
      const current = questions[currentQuestion];

      current.options.forEach(opt => {
        const btn = document.createElement('div');
        btn.className = 'multi-choice';
        btn.innerText = opt;
        btn.onclick = () => selectLetter(btn, opt[0]);
        alphabetContainer.appendChild(btn);
      });

      document.getElementById('story').innerHTML =
        `ç¬¬ <span id="questionNumber">${currentQuestion + 1}</span> é¡Œï¼š${current.question}`;
    }

    function selectLetter(button, letter) {
      letter = letter.toUpperCase();
      if (button.classList.contains('selected')) {
        button.classList.remove('selected');
        selectedLetters = selectedLetters.filter(l => l !== letter);
      } else {
        button.classList.add('selected');
        selectedLetters.push(letter);
      }
    }

    function submitMulti() {
      const story = document.getElementById('story');
      const correct = questions[currentQuestion].correct.map(c => c.toUpperCase());
      const sel = selectedLetters.map(l => l.toUpperCase());
      const isCorrect = correct.every(c => sel.includes(c)) && sel.length === correct.length;

      if (isCorrect) {
        // æ”¶é›†æ¯é¡Œå°æ‡‰çš„çµæœå­—ä¸²
        if (currentQuestion === 0) finalResult.push("B");
        else if (currentQuestion === 1) finalResult.push("YA");
        else if (currentQuestion === 2) finalResult.push("CRY");
        else if (currentQuestion === 3) finalResult.push("æ¨‚");

        currentQuestion++;
        selectedLetters = [];

        if (currentQuestion < questions.length) {
          generateButtons();
        } else {
          // æœ€å¾Œæ­æ›‰
          setTimeout(() => {
            story.innerHTML =
              `ğŸ‰ æ­å–œå®Œæˆå›æ†¶æŒ‘æˆ°ï¼<br><br>` +
              `ä½ æœ€å¾Œé¸æ“‡ï¼š<strong>${finalResult.join('ã€')}</strong><br><br>` +
              `ä¹Ÿå°±æ˜¯ï¼š<strong style="font-size:2em;">ç•¢æ¥­å¿«æ¨‚</strong>ğŸ“<br><br>` +
              `<button onclick="restart()">é‡æ–°æŒ‘æˆ°</button>`;
            document.getElementById('alphabet').innerHTML = '';
          }, 500);
        }
      } else {
        // éŒ¯èª¤æç¤º
        story.innerHTML = hintMessages[Math.floor(Math.random() * hintMessages.length)];
        generateButtons();
        selectedLetters = [];
      }
    }

    function resetMulti() {
      selectedLetters = [];
      generateButtons();
    }

    function restart() {
      currentQuestion = 0;
      selectedLetters = [];
      finalResult = [];
      generateButtons();
    }

    function toggleMusic() {
      const bgm = document.getElementById('bgm');
      if (bgm.muted) {
        bgm.muted = false;
        document.getElementById('musicControl').innerText = 'ğŸ”Š éŸ³æ¨‚';
      } else {
        bgm.muted = true;
        document.getElementById('musicControl').innerText = 'ğŸ”ˆ éŸ³æ¨‚';
      }
    }

    // åˆå§‹åŒ–
    generateButtons();
  </script>
</body>
</html>

